# 数据库配置域
# 包含PostgreSQL、Redis、缓存等数据存储配置

# PostgreSQL数据库配置
postgresql:
  # 连接配置
  host: "localhost"
  port: 5433
  name: "campusworld_dev"
  user: "campusworld_dev_user"
  password: "campusworld_dev_password"
  
  # 连接池配置
  pool:
    size: 20
    max_overflow: 30
    pre_ping: true
    recycle: 300
    echo: false
  
  # 性能配置
  performance:
    statement_cache_size: 1000
    prepared_statement_cache_size: 100
    enable_connection_pooling: true
  
  # 安全配置
  security:
    ssl_mode: "prefer"
    ssl_cert: ""
    ssl_key: ""
    ssl_ca: ""
  
  # 备份配置
  backup:
    enabled: false
    schedule: "0 2 * * *"  # 每天凌晨2点
    retention_days: 7
    compression: true

# Redis配置
redis:
  # 连接配置
  host: "localhost"
  port: 6380
  db: 0
  password: ""
  
  # 连接池配置
  pool:
    max_connections: 10
    min_connections: 2
    max_idle_time: 300
  
  # 超时配置
  timeout:
    socket: 5
    socket_connect: 5
    socket_keepalive: 300
  
  # 集群配置
  cluster:
    enabled: false
    nodes: []
    read_from_replicas: true
  
  # 持久化配置
  persistence:
    rdb_enabled: true
    rdb_save_interval: 900
    aof_enabled: false

# 缓存配置
cache:
  # 默认缓存配置
  default:
    ttl: 3600  # 1 hour
    max_size: 1000
    enable_compression: true
  
  # 用户会话缓存
  session:
    ttl: 86400  # 24 hours
    max_size: 10000
    compression: true
  
  # API响应缓存
  api:
    ttl: 300  # 5 minutes
    max_size: 5000
    compression: true
  
  # 数据库查询缓存
  query:
    ttl: 1800  # 30 minutes
    max_size: 2000
    compression: false

# 图数据库配置
graph_database:
  # Neo4j配置（如果使用）
  neo4j:
    enabled: false
    uri: "bolt://localhost:7687"
    user: "neo4j"
    password: "password"
    database: "neo4j"
  
  # 图存储配置
  storage:
    type: "postgresql"  # postgresql, neo4j, arangodb
    schema_version: "1.0"
    auto_migrate: true
  
  # 图查询配置
  query:
    timeout: 30
    max_depth: 10
    batch_size: 1000
  
  # 图同步配置
  sync:
    enabled: true
    interval: 60  # 1 minute
    batch_size: 100
    retry_attempts: 3
